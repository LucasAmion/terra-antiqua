<!-- Copyright (C) 2021 by Jovid Aminov, Diego Ruiz, Guillaume Dupont-Nivet
 Terra Antiqua is a plugin for the software QGis that deals with the reconstruction of paleogeography.
Full copyright notice in file: terra_antiqua.py -->

<html>

<head>
  <link rel="stylesheet" type="text/css" href="StyleSheet.css">
  <title> Reconstruct Agegrids </title>
</head>

<body>
  This tool allows for the reconstruction of raster layers to a specific age using one of the
  rotation models available in the GPlates repository. The reconstruction will be performed
  using different approaches depending on the type of raster to be generated:
  Topography or Agegrid.

  <h4>II- Agegrid:</h4>

  <p>
    In the case of Bathymetry this tool applies the algorithm developed by <b>Simon Williams</b> et al.
    in their paper called "Reconstructing seafloor age distributions in lost ocean basins" (https://doi.org/10.1016/j.gsf.2020.06.004).
    As opposed to the topography case, here we start from a time before the desired reconstruction
    time and reconstruct forward until we get to the reconstruction time.
  </p>

  <p>
    In summary, during each iteration of the algorithm, points are generated along <b>Mid-Ocean Ridges</b>
    and the already existing points are moved away from the corresponding Mid-Ocean Ridge, eliminating
    them when they enter a <b>Subduction Zone</b>. For more details, look at the paper linked above.
  </p>
  
  <p>
    <b>Rotation Model:</b> The rotation model to use can be any of the ones available in the <b>GPlates
    repository</b> (see https://gwsdoc.gplates.org/models for more information). The corresponding model
    files will be downloaded into the user's data directory (<i>C:\Users\{USER}\AppData\Local
    \QGIS\QGIS3\plugins\terra_antiqua\models\{MODEL_NAME}</i> on Windows or <i>/home/{USER}/
    .local/share/QGIS/QGIS3/plugins/terra_antiqua/models/{MODEL_NAME}</i> on Unix based systems).
    The downloaded files will include the rotation file itself (.rot format), as well as the Topology
    Features and Static Polygons.
  </p>
  
  <p>
    <b>Start time:</b> the starting time of the reconstruction. It can be any time between the desired
    reconstruction time and the oldest time available for the selected rotation model. For highest 
    possible accuracy, it is recommended to pick the oldest time available, though this will make the
    reconstruction take quite some time.
  </p>

  <p>
    <b>End time:</b> The time for the output raster layer to be generated in Ma (millions
    of years ago). It must be at least one Ma newer than the start time.
  </p>

  <p>
    <b>Time Step:</b> The time step is the time which is allowed to pass between each iteration of the
    algorithm. Selecting a higher value will speed-up the process but lower the accuracy of the result.
  </p>

  
  <p>
    <b>Spatial resolution:</b> This is the distance between the points generated along Mid-Ocean
    Ridges at each iteration of the algorithm and between the points generated in the last step,
    the gridding step where the result is converted into a raster file.
  </p>

  <p>
    <b>Convert to bathymetry:</b> This is enabled by default. The <b>Agegrid</b> generated by the
    algorithm will be converted into <b>Bathymetry</b> using the simple formula:
    Od = -2620 -330 * Oa
    <p>  
      Where:<br/>
      <i>Od</i> - Ocean depth<br/>
      <i>Oa</i> - Ocean age
    </p>
  </p>

  <p><b>Advanced parameters:</b></p>

  <p>
    <b>Extent:</b> The raster can be cropped to a specific bound defining maximum and minimum values for
    longitude and latitudes. This will be done after the reconstruction is finished. This is useful if one
    is only concerned with a particular region of the globe.
  </p>

  <p>
    <b>Number of Threads:</b> This allows the algorithm to run in multiple parallel threads, which speeds
    up the reconstruction process. We recommend setting this to a value lower or equal to the number
    of cores of your computer's CPU.
  </p>
  
  <p>
    <b>Spreading rate:</b> The speed at which the ocean crust moves and new one is generated, measured
    in mm/year.
  </p>

  <p>
    <b><i>Output file path:</i></b><br/>
    If there is no path specified here, the file will be created in the temporary folder. The full path
    will be shown in the <b>Log</b> tab and the result will be loaded to the map canvas.
    
    <div>
      <b>Warning:</b> Please avoid using these characters in the file name, as they might cause
      processing errors: <i>( ) / - % $ @ #</i><br/>
      <b>Note:</b> If this tool is used repetitively with no path specified, previous results will
      be overwritten. To avoid this, specify a different path (or filename) each time
    </div>
  </p>
</body>

</html>